{"version":3,"names":["global","factory","this","Worker","simpleYenc","string","htmlCodeOverrides","Map","forEach","k","v","set","output","Uint8Array","length","byte","escaped","byteIndex","offset","startIdx","substring","parseInt","offsetReverse","i","charCodeAt","htmlOverride","get","subarray","wasmModule","WeakMap","simdWasm","String","raw","scalarWasm","SynAudio","constructor","options","_correlationSampleSize","correlationSampleSize","_initialGranularity","initialGranularity","_correlationThreshold","correlationThreshold","_module","async","WebAssembly","validate","simd","then","simdSupported","compile","SynAudioWorker","module","_sourceCache","_getCorrelationSampleSize","a","b","Math","min","samplesDecoded","_getInitialGranularity","_setAudioDataOnHeap","input","heapPos","bytesPerElement","BYTES_PER_ELEMENT","floatPos","_executeAsWorker","functionName","params","source","webworkerSourceCode","self","onmessage","msg","Promise","resolve","data","_workerMethods","apply","results","postMessage","type","URL","createObjectURL","Blob","Buffer","from","toString","worker","globalThis","name","result","message","terminate","_sync","floatByteLength","Float32Array","memory","Memory","initial","channelData","instantiate","env","exports","instanceExports","Object","entries","correlate","dataArray","buffer","heapView","DataView","aPtr","value","bPtr","bestCorrelationPtr","bestSampleOffsetPtr","correlation","getFloat32","sampleOffset","getInt32","_syncWorkerConcurrent","threads","promises","lengths","maxThreads","log","max","round","aLength","ceil","t","aSplit","cutChannel","push","_syncWorker","all","bestResultIdx","bestCorrelation","_syncWorkerConcurrentMain","_instance","clips","workers","graph","notify","wait","runningThreads","vertex","vertexClip","edges","Set","e","edgeClip","edge","syncWorker","correlationResult","add","parent","weighResults","localeCompare","path","cycles","detectCycle","values","has","cycleStartEdge","cycleEndEdge","keep","remove","cycleWith","delete","M","size","roots","traverseRoot","root","sampleOffsetFromRoot","sort","require","define","amd"],"sources":["synaudio.js"],"mappings":"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"}