/* Copyright 2022 Ethan Halsall. This file is part of synaudio. https://github.com/eshaz/synaudio */
var e,g;e=this,g=function(e){const g=(e,g=4294967295,f=79764919)=>{const r=new Int32Array(256);let b,i,t,p=g;for(b=0;b<256;b++){for(t=b<<24,i=8;i>0;--i)t=2147483648&t?t<<1^f:t<<1;r[b]=t}for(b=0;b<e.length;b++)p=p<<8^r[255&(p>>24^e[b])];return p},f=(e,f=g)=>{const r=e=>new Uint8Array(e.length/2).map(((g,f)=>parseInt(e.substring(2*f,2*(f+1)),16))),b=e=>r(e)[0],i=new Map;[,8364,,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,,381,,,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,,382,376].forEach(((e,g)=>i.set(e,g)));const t=new Uint8Array(e.length);let p,s,o,h=!1,n=0,q=42,O=e.length>13&&"dynEncode"===e.substring(0,9),u=0;O&&(u=11,s=b(e.substring(9,u)),s<=1&&(u+=2,q=b(e.substring(11,u))),1===s&&(u+=8,o=(e=>new DataView(r(e).buffer).getInt32(0,!0))(e.substring(13,u))));const c=256-q;for(let g=u;g<e.length;g++)if(p=e.charCodeAt(g),61!==p||h){if(92===p&&g<e.length-5&&O){const f=e.charCodeAt(g+1);117!==f&&85!==f||(p=parseInt(e.substring(g+2,g+6),16),g+=5)}if(p>255){const e=i.get(p);e&&(p=e+127)}h&&(h=!1,p-=64),t[n++]=p<q&&p>0?p+c:p-q}else h=!0;const x=t.subarray(0,n);if(O&&1===s){const e=f(x);if(e!==o){const g="Decode failed crc32 validation";throw console.error("`simple-yenc`\n",g+"\n","Expected: "+o+"; Got: "+e+"\n","Visit https://github.com/eshaz/simple-yenc for more information"),Error(g)}}return x},r=new WeakMap,b=String.raw`dynEncode01658cce3922eÆØÒfeeefsfÅoääääääääääegtfhÊÓÛkÒÊÒÔ×Þgeghgfekmfäe¦åíiplgnÈÔ××ÊÑÆÙÊeepÄÄÍÊÆÕÄÇÆØÊheofivälànâiá©eeeeeeeeg¥g¥g¦g­reg¦fÐ|f¦v³i¥f¦uÐz¦efÐ}ef¦gÙxÏ~e¦¥Ðuth¥ffwÑvÏ{tpuo¦eqh¥eqg¦gÙÏqqbeeeegvÏ¦gÙÏbeeebIfbpeeeg¦i×q¦gÙÏrrbeeeeqvÏ¦gÙÏbeeebIfbpeeeg¦m×q¦gÙÏrrbeeeeqvÏ¦gÙÏbeeebIfbpeeeg¦q×q¦gÙÏrrbeeeeqvÏ¦gÙÏbeeebIfbpeepr¦¥Ðpos¦¥Ðog¦uÏqz­repg¥fq±reg¥fqÐo¦i®reeqvÏ¦gÙÏ~®iäeq¦gÙÏe{¦gÙÏ®j¦epreo¦áÖ{¦iÐp¦gÛ¦fÏ¦fÖg¥pªi¥¦egqfpzgÐ¦áÖ¦iÐ¦gÛ¦fÏ¦cdddlÖp¦egh¥srbegesbegebIfbpgesrbegusbegubIfbpgur¦Ïrs¦Ïsg¦mÏgp¦gÐpreppi¥egqÏg¦gÙÏpegvÏ¦gÙÏbegepbegebIfbpgepo{«rffq{ÏqÐopq¦äØgo¦fÖiäeq¦gÙÏoeqvÏ¦gÙÏgeoge÷geq¦fÏjqpqg}«refqÐpyq¦gÙoÏregh¥goÏqgrÏsgeqge÷geqsgiqgi÷gig¦mÏgp¦gÐpreppxyÏytxÏtw¦fÏw|¬repqfpf¦e±re¦efÐtf¦fÖuef¦gÙvÏwf¦i®yf¦áÖo¦q«zh¥frÑs¦egg¥g¥yreeefsÏ¦gÙÏ®wes¦gÙÏq°ÖreeqbegeebegebIfbpgeg¥o¦i«reeqbeguebegubIfbpguo¦m«reeqbegebegbIfbpgzreeqbegebegbIfbpgpfog«rfpg¦äØquiäeg¦gÙÏxegsÏ¦gÙÏgexge÷geg¦f×jgpgqt«refgÐqpg¦gÙxÏ{egh¥gxÏsg{Ï}gesge÷ges}gisgi÷gig¦mÏgq¦gÐqrepppvÏpr¦fÏr|¬reppg¥j¦g­rej¦fÐvi¦v³i¥i¦uÐ|¦ey¦eiÐ{hi¦gÙzÏ}h¦¥Ðjt¦ewh¥iiwÑuÏxtpjo¦eqh¥hqg¦gÙÏqqbeeehguÏ¦gÙÏbeeebIfbpeehg¦i×q¦gÙÏrrbeeehquÏ¦gÙÏbeeebIfbpeehg¦m×q¦gÙÏrrbeeehquÏ¦gÙÏbeeebIfbpeehg¦q×q¦gÙÏrrbeeehquÏ¦gÙÏbeeebIfbpeepr¦¥Ðpos¦¥Ðog¦uÏq|­repg¥iq±reg¥iqÐo¦i®rehquÏ¦gÙÏ}®iähq¦gÙÏhx¦gÙÏ®j¦epreo¦áÖx¦iÐp¦gÛ¦fÏ¦fÖ~g¥pªi¥¦egqfp|gÐ¦áÖ¦iÐ¦gÛ¦fÏ¦cdddlÖp¦egh¥srbegesbegebIfbpgesrbegusbegubIfbpgur¦Ïrs¦Ïsg¦mÏgp¦gÐprepp~i¥hgqÏg¦gÙÏphguÏ¦gÙÏbegepbegebIfbpgepox«rfiqxÏqÐopq¦äØgo¦fÖiähq¦gÙÏohquÏ¦gÙÏgeoge÷geq¦fÏjqpqg{«reiqÐpyq¦gÙoÏrhgh¥goÏqgrÏsgeqge÷geqsgiqgi÷gig¦mÏgp¦gÐpreppyzÏytzÏtw¦fÏwv¬repqfpi¦e±re¦ep¦eiÐsi¦fÖthi¦gÙuÏwi¦i®yi¦áÖj¦q«|¦erh¥irÑo¦egg¥g¥yrehhioÏ¦gÙÏ®who¦gÙÏq°ÖrehqbegehbegebIfbpgeg¥j¦i«rehqbeguhbegubIfbpguj¦m«rehqbeghbegbIfbpg|rehqbeghbegbIfbpgpjgi«rfpg¦äØqtiähg¦gÙÏzhgoÏ¦gÙÏgezge÷geg¦f×jgpgqs«reigÐqpg¦gÙzÏxhgh¥gzÏogxÏ{geoge÷geo{giogi÷gig¦mÏgq¦gÐqrepppuÏpr¦fÏrv¬repp¦ein¦egem¦egeg¥k¦e¯i¥k¦hÖjg¥k¦fÐi¦h®i¥¦eoqfpegk¦áÖoqh¥gge ggi ggm ggq g¦uÏgq¦iÐqreppji¥eo¦gÙÏgjqh¥gge g¦iÏgq¦fÐqreppg¥i¦h®i¥¦eoqfphgk¦áÖoqh¥gge ggi ggm ggq g¦uÏgq¦iÐqreppji¥ho¦gÙÏgh¥gge g¦iÏgj¦fÐjreppk¦uÐskk¦v­i¥¦ei¦eqqgpbx¦ejhgh¥gbeeebJfbKfbIfgbeeubJfbKfbIfgbeebJfbKfbIfgbeebJfbKfbIfg¦¥Ðgj¦uÏjs­repi¦ÕÖq¦fiqfpk¦uÐsk¦eqpbhbgbebf÷÷÷g¥kq±req¦äØkÏpk¦hÖoiähq¦gÙÏgojh¥ggeøù÷g¦iÏgj¦fÐjrepoq×jqpqp¦h®rekqÐjhq¦gÙÏgh¥ggqøùggmøùggiøùggeøù÷÷÷÷g¦uÏgj¦iÐjrepp¦ejii¥bxhgh¥ggbeeebJfbpeeggbeeubJfbpeuggbeebJfbpeggbeebJfbpeg¦¥Ðgj¦uÏjs­reppk¨eeå$÷úfkÐtg¥jk³rekkjÐf¦h°iäf¦áÖr¦iÐg¦gÛ¦fÏo¦hÖqbx¦epg¦q´i¥o¦adddlÖohj¦gÙÏgh¥ggbegebJfbpgeggbegubJfbpguggbegbJfbpgggbegbJfbpgg¦¥Ðgp¦uÏpo¦iÐoreppqi¥hjpÏ¦gÙÏgh¥ggbegebJfbpgeg¦uÏgq¦fÐqreppfr«rfjrÏjjpjÐqhj¦gÙÏgh¥gggeøgeg¦iÏgq¦fÐqreppöt¦e¯i¥l¦gÙu¦er¦ekÐvk¦fÖwk¦fÐ¦ÕÖq eoh¥er¦gÙÏygeekrÏ¦gÙÏ|gäiªi¥bqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeee¦eqfpbx¦eg¦epbqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeeeh¥goÏfbeeebJfghÏjbeeebKfbIffbeeubJfjbeeubKfbIffbeebJfjbeebKfbIffbeebJfjbeebKfbIfbKfbIfbKfbIfbKfbIfbKfbIfg¦¥Ðgp¦uÏps­repqpf|gebhbgbebf÷÷÷bhbgbebf÷÷÷g¥fk³ref¦äØgwiäyf¦gÙjÏgeøhjÏgeù÷ù÷f¦f×jfpfgv«ref¦gÙgkfÐjh¥goÏfgiøghÏpgiùfgeøpgeù÷÷ùù÷÷g¦mÏgj¦gÐjreppú ú mgeÃi¥nrgemgep  ouÏolrÏrt­reppg¥l¦f±rengefllÑgÏjtjt­t¦epfgÐf¦ef¦e¯rg¥k¦e±i¥qfpk¦hÖjg¥k¦fÐ¦h®i¥qfper¦gÙÏgk¦áÖpqh¥gge ggi ggm ggq g¦uÏgq¦iÐqreppjªreeprÏ¦gÙÏgh¥gge g¦iÏgj¦fÐjrepprt³re¦ekÐpk¦fÖuer¦gÙÏok¦fÐ¦ÕÖl h¥er¦gÙÏvgeekrÏ¦gÙÏwgäiªi¥bqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeee¦eqfpbx¦eqoghjbqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeeeh¥gbeeebJfjbeeebKfbIfgbeeubJfjbeeubKfbIfgbeebJfjbeebKfbIfgbeebJfjbeebKfbIfbKfbIfbKfbIfbKfbIfbKfbIfg¦¥Ðgj¦¥Ðjq¦uÏqs­replpfwgebhbgbebf÷÷÷bhbgbebf÷÷÷g¥fk³ref¦äØguiävf¦gÙjÏgeøhjÏgeù÷ù÷f¦f×jfpfgp«ref¦gÙgkfÐjh¥goÏfgiøghÏqgiùfgeøqgeù÷÷ùù÷÷g¦mÏgj¦gÐjreppú ú mgeÃi¥nrgemgep  o¦iÏor¦fÏrt¬reppppetÙÆ×ÌÊÙÄËÊÆÙÚ×ÊØflØÎÒÉ`,i=String.raw`dynEncode010e15d7b662o{+nnns|{s{}O)q}szosmmvso~mpos  ÚN.OV.Oy/.O\N.Oy/.O/.O/N./O/N...x08.8 F..8.8 F..8.8 F..8.8 F.Ox/.Ox/.Ox/..VN..Oy0Z....x8.8 F../..T..y/..O0x/./N..x0..x08.8 F..8.8 F.Ox/.Oy0..x/..Ox0U.OZ.O/.8/.OT/.OT/./N..8. 0FN...8.8 F.OT..8.8 F...8.8 F..x/.Oy0N.0OVO.Oy/N..x08.¡0..x08¢.8.¡0.8¢.8.¡0.8¢.8.¡0.8¢.    /..¢..¢..¢..¢.    /.Ox/.Ox0.V.OyO0.\.O/.O..O0x8.¡0..x8¢. /..¢. /.O./O.y.T..y/..O0x/..x/N.8.¡0.¢.8.¡0.¢.  /..8¢..8¢.  /.Ox/.Ox/.Oy0..ÀQÍ 0£É..£É­.É°±ÄÊR/$N.......OD.ODN.OXN.O/.Oy0O]N./.O0/N. .8É®.8É®.8É®.8É®/ .Ox/.Oy0.N.O.x/./N. .8É®/ .Ox/.Oy0N.OWNO/./.O0/N.!.8É®.8É®.8É®.8É®/!.Ox/.Oy0.N.O.x/N.!.8É®/!.Ox/.Oy0.Oy/.À/.OVNO/O/.!Ä.£/O/./N.8.¡0.¢.8.¡0.¢.8.¡0.¢.8.¡0.¢.    /.Ox/.Ox0.V.O/O/.Oy/.À/O/.!.Å0!±Ä/N..\..Ox/.O0.O.x/./N.8.¡0.¢. /.Ox/.Oy0.../.OW..y/.O.x/N.8.¡0.¢.8.¡0.¢.8.¡0.¢.8.¡0.¢.    /.Ox/.Oy0O/.N./N..8.¡F..8.¡F..8.¡F..8.¡F.Ox/.Ox0.V..QÍ £/..y/N..\..Ox/..yO0N.O.x/N..8.¡F.Ox/.Ox/.Oy0.OW..y/.O.x/N..8.¡F..8.¡F..8.¡F..8.¡F.Ox/.Oy0./N.OZNO/.O/.O/O/./O/N. .8É¯/"..x8É/#.8/... .!±Ä..0.l..D..F../.".#®/ ..x/..x0.VN.OZ...z0x0...V)/O/..y0O.OX)/N.OZN.$/ .O/N.OyOWN.$/ .O.x/.$/ .O0/N. .8É®.8É®.8É®.8É®/ .Ox/.Oy0.S..xO.x/N. .8É®/ .Ox/.Oy0..\.O.x/..xO.x/N. .8É¯/".8É/#.8/... .!±Ä..0.lN..D..F.".#®/ .Ox/.Ox/.Ox0.U`;class t{constructor(g={}){this.i=g.correlationSampleSize>0?g.correlationSampleSize:11025,this.t=g.initialGranularity>0?g.initialGranularity:16,this.p=g.o>=0?g.o:.5,this.h=r.get(t),this.h||(this.h=(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))().then((e=>e?WebAssembly.compile(f(b)):WebAssembly.compile(f(i)))),r.set(this.h)),this.q=function g(f,r,b){this.O=new Map,this.u=(e,g)=>Math.min(e.samplesDecoded,g.samplesDecoded,this.i),this.l=(e,g)=>Math.min(e.samplesDecoded,g.samplesDecoded,this.t),this.j=(e,g,f)=>{const r=g.BYTES_PER_ELEMENT;let b=f/r;for(let i=0;i<e.length;i++)f+=e[i].length*r,g.set(e[i],b),b+=e[i].length;return f},this.m=(f,r)=>{let b=this.O.get(f);if(!b){let e,r="text/javascript",i=`'use strict';(${""+((e,g,f,r)=>{self.onmessage=b=>{new e(Promise.resolve(b.data.module),f,r).N.get(g).apply(null,b.data.k).then((e=>{self.postMessage(e)}))}})})(${""+g}, "${f}", ${this.i}, ${this.t})`;try{e=void 0!==process.versions.node}catch{}b=e?`data:${r};base64,${Buffer.from(i).toString("base64")}`:URL.createObjectURL(new Blob([i],{type:r})),this.O.set(f,b)}const i=new(globalThis.Worker||e)(b,{name:"SynAudio"}),t=new Promise((e=>{i.onmessage=g=>{i.terminate(),e(g.data)}}));return this.h.then((e=>{i.postMessage({module:e,k:r})})),t},this.I=(e,g)=>{const f=Float32Array.BYTES_PER_ELEMENT,r=this.u(e,g),b=this.l(e,g),i=new WebAssembly.Memory({initial:(e.samplesDecoded*e.channelData.length+g.samplesDecoded*g.channelData.length)*f/65536+4});return this.h.then((e=>WebAssembly.instantiate(e,{env:{memory:i}}))).then((({exports:t})=>{const p=new Map(Object.entries(t)),s=p.get("correlate"),o=new Float32Array(i.buffer),h=new DataView(i.buffer),n=p.get("__heap_base").value,q=this.j(e.channelData,o,n),O=this.j(g.channelData,o,q),u=O+f;return s(n,e.samplesDecoded,e.channelData.length,q,g.samplesDecoded,g.channelData.length,r,b,O,u),{correlation:h.getFloat32(O,!0),sampleOffset:h.getInt32(u,!0)}}))},this.v=(e,g,f)=>{const r=[],b=[0],i=this.u(e,g),t=Math.log(e.samplesDecoded*i)/Math.log(this.t+1)*Math.log(i/1e4+1);f=Math.max(Math.round(Math.min(f,t,e.samplesDecoded/i/4)),1);const p=Math.ceil(e.samplesDecoded/f);let s=0;for(let o=0;o<f;o++){const f={channelData:[]};for(let g=0;g<e.channelData.length;g++){const r=e.channelData[g].subarray(s,s+p+i);f.channelData.push(r),f.samplesDecoded=r.length}s+=p-i,b.push(s),r.push(this.F(f,g))}return Promise.all(r).then((e=>{let g=0,f=-1;for(let r=0;r<e.length;r++)e[r].correlation>f&&(g=r,f=e[r].correlation);return{correlation:e[g].correlation,sampleOffset:e[g].sampleOffset+b[g]}}))},this.F=(e,g)=>this.m("_sync",[e,g]),this.J=(e,g,f)=>globalThis.Worker?this.m("_syncWorkerConcurrent",[e,g,f]):this.v(e,g,f),this.N=new Map([["_sync",this.I],["_syncWorker",this.F],["_syncWorkerConcurrent",this.v]]),this.h=f,this.i=r,this.t=b},this.K=new this.q(this.h,this.i,this.t)}async syncWorkerConcurrent(e,g,f){return this.K.J(e,g,f>=1?f:1)}async syncWorker(e,g){return this.K.F(e,g)}async sync(e,g){return this.K.I(e,g)}async syncMultiple(e,g){g=g>=1?g:8;const f=[],r=[];let b=()=>{},i=Promise.resolve(),t=0;for(let u=0;u<e.length;u++)r.push({vertex:{}});for(let u=0;u<e.length;u++){const p=e[u],s=r[u].vertex;s.name=p.name,s.samplesDecoded=p.data.samplesDecoded,s.M=new Set;for(let o=0;o<e.length;o++){if(u===o)continue;const h=e[o],n=r[o];t++,f.push(this.syncWorker(p.data,h.data).then((e=>{e.correlation>this.p&&s.M.add({parent:s,vertex:n.vertex,samplesDecoded:h.data.samplesDecoded,...e}),t--,b()}))),t>=g&&(i=new Promise((e=>{b=e})),await i)}}await Promise.all(f);const p=(e,g)=>e.parent&&g.parent&&e.parent.samplesDecoded!==g.parent.samplesDecoded?e.parent.samplesDecoded>g.parent.samplesDecoded:e.correlation!==g.correlation?e.correlation>g.correlation:e.sampleOffset!==g.sampleOffset?e.sampleOffset>g.sampleOffset:e.vertex&&g.vertex&&e.vertex.name.localeCompare(g.vertex.name)<0,s=new Map,o=new Set,h=e=>{for(const g of e.M.values()){if(s.has(e))return s.get(e);s.set(e,g);const f=h(g.vertex),r=g;if(f){let e,g;p(f,r)?(e=f,g=r):(e=r,g=f),g.W||(g.W=new Set,o.add(g)),g.W.add(e),e.W&&e.W.delete(g)}s.delete(e)}};for(const{vertex:u}of r)h(u);for(const u of o)u.W.size&&u.parent.M.delete(u);const n=new Set;for(const u of r)n.add(u.vertex);for(const u of r)for(const e of u.vertex.M)n.delete(e.vertex);const q=(e,g,f,r=0)=>{for(const b of f)e.has(b.vertex)&&p(e.get(b.vertex),b)||e.set(b.vertex,{name:b.vertex.name,correlation:b.correlation,sampleOffset:r+b.sampleOffset}),q(e,g,b.vertex.M,r+b.sampleOffset)},O=[];for(const u of n){const e=new Map;e.set(u,{name:u.name,sampleOffset:0}),q(e,u,u.M),O.push([...e.values()].sort(((e,g)=>e.sampleOffset-g.sampleOffset||(e.correlation||0)-(g.correlation||0)||g.name.localeCompare(e.name))))}return O}}return t},"object"==typeof exports&&"undefined"!=typeof module?module.exports=g(require("@eshaz/web-worker")):"function"==typeof define&&define.amd?define(["@eshaz/web-worker"],g):(e="undefined"!=typeof globalThis?globalThis:e||self).SynAudio=g(e.Worker);
//# sourceMappingURL=synaudio.min.js.map