/* Copyright 2022 Ethan Halsall. This file is part of synaudio. https://github.com/eshaz/synaudio */
var e,g;e=this,g=function(e){const g=(e,g=4294967295,b=79764919)=>{const f=new Int32Array(256);let r,o,p,i=g;for(r=0;r<256;r++){for(p=r<<24,o=8;o>0;--o)p=2147483648&p?p<<1^b:p<<1;f[r]=p}for(r=0;r<e.length;r++)i=i<<8^f[255&(i>>24^e[r])];return i},b=(e,b=g)=>{const f=e=>new Uint8Array(e.length/2).map((g,b)=>parseInt(e.substring(2*b,2*(b+1)),16)),r=e=>f(e)[0],o=new Map;[,8364,,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,,381,,,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,,382,376].forEach((e,g)=>o.set(e,g));const p=new Uint8Array(e.length);let i,t,h,s=!1,n=0,u=42,y=e.length>13&&"dynEncode"===e.substring(0,9),q=0;y&&(q=11,t=r(e.substring(9,q)),t<=1&&(q+=2,u=r(e.substring(11,q))),1===t&&(q+=8,h=(e=>new DataView(f(e).buffer).getInt32(0,!0))(e.substring(13,q))));const P=256-u;for(let g=q;g<e.length;g++)if(i=e.charCodeAt(g),61!==i||s){if(92===i&&g<e.length-5&&y){const b=e.charCodeAt(g+1);117!==b&&85!==b||(i=parseInt(e.substring(g+2,g+6),16),g+=5)}if(i>255){const e=o.get(i);e&&(i=e+127)}s&&(s=!1,i-=64),p[n++]=i<u&&i>0?i+P:i-u}else s=!0;const j=p.subarray(0,n);if(y&&1===t){const e=b(j);if(e!==h){const g="Decode failed crc32 validation";throw console.error("`simple-yenc`\n",g+"\n","Expected: "+h+"; Got: "+e+"\n","Visit https://github.com/eshaz/simple-yenc for more information"),Error(g)}}return j},f=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),r=new WeakMap,o=new WeakMap,p=String.raw`dynEncode016553abd247eÆØÒfeeefsfÅoääääääääääegtfhÊÓÛkÒÊÒÔ×Þgeghgfekmfäe¦åíiplgnÈÔ××ÊÑÆÙÊeepÄÄÍÊÆÕÄÇÆØÊheofitämâlàmág¥¦cdddl}©eeeeeeU¤©eeeeeeeepg¥g¥g¦g­reg¦fÐzf¦v³i¥ff¦vÐp¦ÕÖg¦vÏofo¯o¦hÖxgx×oÐ¦uÏsp¦iÛr¦kÙeÏqo¦gÙp¦gÙ¦¥ÖÐÏyf¦gÙ{r¦fÏuq¦¥ÐpogÐ¦uÐo¦l°|g¦uÏqoxÐÏvh¥egurh¥ggtÏobeeegbeeebIfbpeegobeeugbeeubIfbpeugobeegbeebIfbpegobeegbeebIfbpeg¦¥Ðgr¦fÐrrepg¥fq±reqog¥|ªrepyw{ÑgÏ®ygpÏ°Örepgsoh¥ggbegegtÏbegebIfbpgeg¦uÏgo¦iÏorepvoxªrfpo¦gÙeÏgh¥gggegtÏge÷geg¦iÏgfo¦fÏo¯reppt{Ïtw¦fÏwz¬repqfpf¦e±reeef¦gÙyÏ®iäefg¦gÙ¦iÐÑeÏ®j¦epf¦i®×{f¦hÖse¦Ïue¦Ïve¦uÏxf¦adddlÖqh¥¦epg¥{ªi¥eebegeefwÑ¦gÙgÏbegebIfbpgeg¥q¦i«rexxbegegxÏbegebIfbpgeq¦m«revvbegegvÏbegebIfbpgeq¦q«reuubegeguÏbegebIfbpgepfqp«rfpptsi¥psÏtp¦gÙeÏgsoh¥gggegrÏge÷geg¦iÏgo¦fÐorepppfÐ¦á°reftÐpt¦gÙeÏgh¥gggegrÏoge÷gegggiogi÷gigggmogm÷gmgggqogq÷gqg¦uÏgp¦iÐpreppryÏrw¦fÏwz¬reppg¥j¦g­rej¦fÐxi¦v³i¥ii¦vÐj¦ÕÖg¦vÏoio¯o¦hÖvgv×oÐ¦uÏqj¦iÛp¦kÙhÏro¦gÙj¦gÙ¦¥ÖÐÏzi¦gÙyp¦fÏsr¦¥Ðj¦etogÐ¦uÐo¦l°{g¦uÏpovÐÏu¦ewh¥hgsrh¥ggtÏobeeegbeeebIfbpeegobeeugbeeubIfbpeugobeegbeebIfbpegobeegbeebIfbpeg¦¥Ðgr¦fÐrrepg¥ip±repog¥{ªrejzwyÑgÏ®zgjÏ°Örejgqoh¥ggbegegtÏbegebIfbpgeg¦uÏgo¦iÏorepuovªrfpo¦gÙhÏgh¥gggegtÏge÷geg¦iÏgio¦fÏo¯repptyÏtw¦fÏwx¬repqfpi¦e±rehhi¦gÙzÏ®iähij¦gÙ¦iÐÑhÏ®j¦epi¦i®×yi¦hÖqh¦Ïsh¦Ïuh¦uÏvi¦adddlÖj¦er¦ewh¥¦epg¥yªi¥hhbegehiwÑ¦gÙgÏbegebIfbpgeg¥j¦i«revvbegegvÏbegebIfbpgej¦m«reuubegeguÏbegebIfbpgej¦q«ressbegegsÏbegebIfbpgepijp«rfpptqi¥pqÏtp¦gÙhÏgqoh¥gggegrÏge÷geg¦iÏgo¦fÐorepppiÐ¦á°reitÐpt¦gÙhÏgh¥gggegrÏoge÷gegggiogi÷gigggmogm÷gmgggqogq÷gqg¦uÏgp¦iÐprepprzÏrw¦fÏwx¬repp¦eqn¦egem¦egegäk¦e¯i¥g¥g¥g¥g¥k¦f«i¥¦erqfpegk}Öroh¥gbÂgebÄbUfg¦mÏgo¦gÐorepbrmnopqrstefghijklbUfbekr«rfpkrÐor¦gÙeÏgh¥gge g¦iÏgo¦fÐorepk¦f«i¥¦erqgpk}Örpbqeeeeeeeeeeeeeeeehgroh¥gbÂgebÄbUfg¦mÏgo¦gÐorepbrmnopqrstefghijklbUfbekr«rfpkrÐor¦gÙhÏgh¥gge g¦iÏgo¦fÐoreppk¦uÐik~k¦v­i¥bqeeeeeeeeeeeeeeee¦eqgp~bx¦eobqeeeeeeeeeeeeeeeehgh¥gbeeebJfbKfbIfgbeeubJfbKfbIfgbeebJfbKfbIfgbeebJfbKfbIfg¦¥Ðgio¦uÏo¯rep¦fqk¦vÐ¦ÕÖ¦uÏqfpk¦uÐik¦epjbebf÷bg÷bh÷g¥jk³rekkjÐp¦i´iäbqeeeeeeeeeeeeeeeebej¦gÙhÏg~bxp¦áÖroh¥gbegebJfbKfbIfg¦uÏgo¦iÐorepbrmnopqrstefghefghbIfbrijklefghefghefghbIfbepr«rfjrÏjjpjÐoj¦gÙhÏgh¥gge~øù÷g¦iÏgo¦fÐoreppk¨eeå$÷¦eoqi¥~bxhgh¥ggbeeebJfbpeeggbeeubJfbpeuggbeebJfbpeggbeebJfbpeg¦¥Ðgio¦uÏo¯reppúfkÐsg¥ko±rekkoÐf¦h°iäo¦gÙhÏg~bxf¦áÖjrh¥ggbegebJfbpgeg¦uÏgr¦iÐrrepfj«rfjoÏjopoÐro¦gÙhÏgh¥ggge~øgeg¦iÏgr¦fÐrreppös¦e¯i¥l¦gÙv¨eeå¤úk¦vÐ¦ÕÖ¦uÏrmge ¦efeph¥f¦gÙeÏwge~gäqªi¥bqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeee¦eqfpbx¦eg¦etbqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeeeh¥gpÏjbeeebJfghÏobeeebKfbIfjbeeubJfobeeubKfbIfjbeebJfobeebKfbIfjbeebJfobeebKfbIfbKfbIfbKfbIfbKfbIfbKfbIfg¦¥Ðgit¦uÏt¯reprpj~ bebf÷bg÷bh÷~bebf÷bg÷bh÷g¥jk³rekjÐt¦i´iäj¦gÙgbqeeeeeeeeeeeeeeeebebqeeeeeeeeeeeeeeee~bebxt¦áÖuoh¥gpÏbegebJfghÏbegebKfbIfg¦uÏgbKfbIfo¦iÐorepbrmnopqrstefghefghbIfbrijklefghefghefghbIfbebrmnopqrstefghefghbIfbrijklefghefghefghbIfbe~tu«rfjuÏjjpj¦gÙgkjÐoh¥gpÏgeøghÏgeù÷g¦iÏgù~÷~o¦fÐoreppk¦gÙwÏge ù ~ù ~Åªiânfgem~ge~jppvÏpflÏfs­reppg¥l¦f±rengefllÑgÏjsjs­l¦erfgÐf¦ef¦e¯tg¥k¦e±i¥qfpk¦f¬i¥t¦gÙeÏgbqeeeeeeeeeeeeeeeek}Öroh¥gbÂgebÄbUfg¦mÏgo¦gÐorepbrmnopqrstefghijklbUfbekr«rfpr¦gÙt¦gÙÏeÏgkrÐoh¥gge g¦iÏgo¦fÐorepplt±re¨eeå¤út¦gÙeÏpk¦vÐ¦ÕÖ¦uÏjmge h¥t¦gÙeÏuge~gäqªi¥bqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeee¦eqfpbx¦erpghobqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeeeh¥gbeeebJfobeeebKfbIfgbeeubJfobeeubKfbIfgbeebJfobeebKfbIfgbeebJfobeebKfbIfbKfbIfbKfbIfbKfbIfbKfbIfg¦¥Ðgo¦¥Ðoir¦uÏr¯repjpf~ bebf÷bg÷bh÷~bebf÷bg÷bh÷g¥fk³rekfÐr¦i´iäf¦gÙgbqeeeeeeeeeeeeeeeebebqeeeeeeeeeeeeeeee~bebxr¦áÖsoh¥gpÏbegebJfghÏbegebKfbIfg¦uÏgbKfbIfo¦iÐorepbrmnopqrstefghefghbIfbrijklefghefghefghbIfbebrmnopqrstefghefghbIfbrijklefghefghefghbIfbe~rs«rffsÏjfpf¦gÙgkfÐoh¥gpÏgeøghÏgeù÷g¦iÏgù~÷~o¦fÐoreppk¦gÙuÏge ù ~ù ~Åªiântgem~ge~jpp¦iÏpt¦fÏtl¬repppp`,i=String.raw`dynEncode010f49e3eab5p|,ooot}|t|~P*r~t{ptnnwtpnqptÿ ¡O/PW/Pz0/P]O/Pz0/P0/Py10O/0/0/0P0O//9//y19¡G//9/9¡G//9/9¡G//9/9¡G/1Py0/1Py0/Py0//Py1Y//YOO//9/9¡G/Py0/Py0//Py1Y//y0//y0/Py1/V/P[/P0/90/PU0/PU0/0O///9¡1GO///9/9¡G/PU//9/9¡G///9/9¡G//y0/Pz1O/1PWP/Pz0/Pz0O//y19/¢1//y19£/¡/9/¢1/9£¡/9/¢1/9£¡/9/¢1/9£¡0//£/¡//£¡//£¡//£¡0/Py0//Py1Y/PPy1/]//zP//P1y9/¢1//y9£/¡0//£/¡0/Py/0/Pz/U//z0//P1y0//y0O/9/¢1/£/9/¢1/£/¡¡0//9£//9£/¡¡0/Py0/Py0/Pz1//ÁRÎ¡1¤Ê//¤Ê®/Ê±²ÅàOP0SÿN0&S0'O///////PE/PE/PYO/P0/Pz1P^O/0//10O/!/9Ê¯/9Ê¯/9Ê¯/9Ê¯0!/Py0/Pz1/O/P/y0/0O/!/9Ê¯0!/Py0/Pz1/P^O/0//10O/"/9Ê¯/9Ê¯/9Ê¯/9Ê¯0"/Py0/Pz1/O/P/y0O/"/9Ê¯0"/Py0/Pz1/Pz0/Á0 /PWOP0P/"Å/ ¤0P0/0O/9/¢1/£/¡/9/¢1/£¡/9/¢1/£¡/9/¢1/£¡0/Py0/Py1/WP0/PzPPy/Pz0/Á0 P0/"/Æ1"²Å0O//]//zP1/P/y0/0O/9/¢1/£/¡0/Py0/Pz1//y/0//zPZ//z0/P/y0O/9/¢1/£/9/¢1/£/9/¢1/£/9/¢1/£/¡¡¡¡0/Py0/Pz1/ RÎ¡0 P0/O/0O//9/¢G//9/¢G//9/¢G//9/¢G/Py0/Py1/W// ¤0//z0O//]/0//zP1O//y0/P/y0O//9/¢G/Py0/Pz1//zPZ//z0/P/y0O//9/¢G//9/¢G//9/¢G//9/¢G/Py0/Pz1/ 0O/P[OP0/P0/P0/&/"²0#P0/0P0O/!/9Ê°0$//y9Ê0%/90///!/#±Å//1 /nT//E// G//0/$/%¯0!//y0//y1/WO/P[///{1y1///W*0P0//z1P/PY*0O/P[O/'0!/P0O/PzPXO/'0!/P/y0/'0!//10O/!/9Ê¯/9Ê¯/9Ê¯/9Ê¯0!/Py0/Pz1/T/P/Py/y0O/!/9Ê¯0!/Py0/Pz1//]/P0/&/"²0"/P/y0O/!/9Ê°0#//y9Ê0$/90///!/"±Å//1 /nTO//E// G/#/$¯0!/Py0/Py1/V`,t=String.raw`dynEncode0165578ad641eÆØÒfeeefsfÅoääääääääääegwfhÊÓÛkÒÊÒÔ×Þghgååihgfekmfäe¦åíiplgnÈÔ××ÊÑÆÙÊeepÄÄÍÊÆÕÄÇÆØÊheofitämâlàmág¥¦cdddl}©eeeeeeU¤©eeeeeeeepg¥g¥g¦g­reg¦fÐzf¦v³i¥ff¦vÐp¦ÕÖg¦vÏofo¯o¦hÖxgx×oÐ¦uÏsp¦iÛr¦kÙeÏqo¦gÙp¦gÙ¦¥ÖÐÏyf¦gÙ{r¦fÏuq¦¥ÐpogÐ¦uÐo¦l°|g¦uÏqoxÐÏvh¥egurh¥ggtÏobeeegbeeebIfbpeegobeeugbeeubIfbpeugobeegbeebIfbpegobeegbeebIfbpeg¦¥Ðgr¦fÐrrepg¥fq±reqog¥|ªrepyw{ÑgÏ®ygpÏ°Örepgsoh¥ggbegegtÏbegebIfbpgeg¦uÏgo¦iÏorepvoxªrfpo¦gÙeÏgh¥gggegtÏge÷geg¦iÏgfo¦fÏo¯reppt{Ïtw¦fÏwz¬repqfpf¦e±reeef¦gÙyÏ®iäefg¦gÙ¦iÐÑeÏ®j¦epf¦i®×{f¦hÖse¦Ïue¦Ïve¦uÏxf¦adddlÖqh¥¦epg¥{ªi¥eebegeefwÑ¦gÙgÏbegebIfbpgeg¥q¦i«rexxbegegxÏbegebIfbpgeq¦m«revvbegegvÏbegebIfbpgeq¦q«reuubegeguÏbegebIfbpgepfqp«rfpptsi¥psÏtp¦gÙeÏgsoh¥gggegrÏge÷geg¦iÏgo¦fÐorepppfÐ¦á°reftÐpt¦gÙeÏgh¥gggegrÏoge÷gegggiogi÷gigggmogm÷gmgggqogq÷gqg¦uÏgp¦iÐpreppryÏrw¦fÏwz¬reppg¥j¦g­rej¦fÐxi¦v³i¥ii¦vÐj¦ÕÖg¦vÏoio¯o¦hÖvgv×oÐ¦uÏqj¦iÛp¦kÙhÏro¦gÙj¦gÙ¦¥ÖÐÏzi¦gÙyp¦fÏsr¦¥Ðj¦etogÐ¦uÐo¦l°{g¦uÏpovÐÏu¦ewh¥hgsrh¥ggtÏobeeegbeeebIfbpeegobeeugbeeubIfbpeugobeegbeebIfbpegobeegbeebIfbpeg¦¥Ðgr¦fÐrrepg¥ip±repog¥{ªrejzwyÑgÏ®zgjÏ°Örejgqoh¥ggbegegtÏbegebIfbpgeg¦uÏgo¦iÏorepuovªrfpo¦gÙhÏgh¥gggegtÏge÷geg¦iÏgio¦fÏo¯repptyÏtw¦fÏwx¬repqfpi¦e±rehhi¦gÙzÏ®iähij¦gÙ¦iÐÑhÏ®j¦epi¦i®×yi¦hÖqh¦Ïsh¦Ïuh¦uÏvi¦adddlÖj¦er¦ewh¥¦epg¥yªi¥hhbegehiwÑ¦gÙgÏbegebIfbpgeg¥j¦i«revvbegegvÏbegebIfbpgej¦m«reuubegeguÏbegebIfbpgej¦q«ressbegegsÏbegebIfbpgepijp«rfpptqi¥pqÏtp¦gÙhÏgqoh¥gggegrÏge÷geg¦iÏgo¦fÐorepppiÐ¦á°reitÐpt¦gÙhÏgh¥gggegrÏoge÷gegggiogi÷gigggmogm÷gmgggqogq÷gqg¦uÏgp¦iÐprepprzÏrw¦fÏwx¬repp¦eqn¦egem¦egegäk¦e¯i¥g¥g¥g¥g¥k¦f«i¥¦erqfpegk}Öroh¥gbÂgebÄbUfg¦mÏgo¦gÐorepbrmnopqrstefghijklbUfbekr«rfpkrÐor¦gÙeÏgh¥gge g¦iÏgo¦fÐorepk¦f«i¥¦erqgpk}Örpbqeeeeeeeeeeeeeeeehgroh¥gbÂgebÄbUfg¦mÏgo¦gÐorepbrmnopqrstefghijklbUfbekr«rfpkrÐor¦gÙhÏgh¥gge g¦iÏgo¦fÐoreppk¦uÐik~k¦v­i¥bqeeeeeeeeeeeeeeee¦eqgp~bx¦eobqeeeeeeeeeeeeeeeehgh¥gbeeebJfbKfbIfgbeeubJfbKfbIfgbeebJfbKfbIfgbeebJfbKfbIfg¦¥Ðgio¦uÏo¯rep¦fqk¦vÐ¦ÕÖ¦uÏqfpk¦uÐik¦epjbebf÷bg÷bh÷g¥jk³rekkjÐp¦i´iäbqeeeeeeeeeeeeeeeebej¦gÙhÏg~bxp¦áÖroh¥gbegebJfbKfbIfg¦uÏgo¦iÐorepbrmnopqrstefghefghbIfbrijklefghefghefghbIfbepr«rfjrÏjjpjÐoj¦gÙhÏgh¥gge~øù÷g¦iÏgo¦fÐoreppk¨eeå$÷¦eoqi¥~bxhgh¥ggbeeebJfbpeeggbeeubJfbpeuggbeebJfbpeggbeebJfbpeg¦¥Ðgio¦uÏo¯reppúfkÐsg¥ko±rekkoÐf¦h°iäo¦gÙhÏg~bxf¦áÖjrh¥ggbegebJfbpgeg¦uÏgr¦iÐrrepfj«rfjoÏjopoÐro¦gÙhÏgh¥ggge~øgeg¦iÏgr¦fÐrreppös¦e¯i¥l¦gÙv¨eeå¤úk¦vÐ¦ÕÖ¦uÏrmge ¦efeph¥f¦gÙeÏwge~gäqªi¥bqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeee¦eqfpbx¦eg¦etbqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeeeh¥gpÏjbeeebJfghÏobeeebKfbIfjbeeubJfobeeubKfbIfjbeebJfobeebKfbIfjbeebJfobeebKfbIfbKfbIfbKfbIfbKfbIfbKfbIfg¦¥Ðgit¦uÏt¯reprpj~ bebf÷bg÷bh÷~bebf÷bg÷bh÷g¥jk³rekjÐt¦i´iäj¦gÙgbqeeeeeeeeeeeeeeeebebqeeeeeeeeeeeeeeee~bebxt¦áÖuoh¥gpÏbegebJfghÏbegebKfbIfg¦uÏgbKfbIfo¦iÐorepbrmnopqrstefghefghbIfbrijklefghefghefghbIfbebrmnopqrstefghefghbIfbrijklefghefghefghbIfbe~tu«rfjuÏjjpj¦gÙgkjÐoh¥gpÏgeøghÏgeù÷g¦iÏgù~÷~o¦fÐoreppk¦gÙwÏge ù ~ù ~Åªiânfgem~ge~jppvÏpflÏfs­reppg¥l¦f±rengefllÑgÏjsjs­l¦erfgÐf¦ef¦e¯tg¥k¦e±i¥qfpk¦f¬i¥t¦gÙeÏgbqeeeeeeeeeeeeeeeek}Öroh¥gbÂgebÄbUfg¦mÏgo¦gÐorepbrmnopqrstefghijklbUfbekr«rfpr¦gÙt¦gÙÏeÏgkrÐoh¥gge g¦iÏgo¦fÐorepplt±re¨eeå¤út¦gÙeÏpk¦vÐ¦ÕÖ¦uÏjmge h¥t¦gÙeÏuge~gäqªi¥bqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeee¦eqfpbx¦erpghobqeeeeeeeeeeeeeeeebqeeeeeeeeeeeeeeeeh¥gbeeebJfobeeebKfbIfgbeeubJfobeeubKfbIfgbeebJfobeebKfbIfgbeebJfobeebKfbIfbKfbIfbKfbIfbKfbIfbKfbIfg¦¥Ðgo¦¥Ðoir¦uÏr¯repjpf~ bebf÷bg÷bh÷~bebf÷bg÷bh÷g¥fk³rekfÐr¦i´iäf¦gÙgbqeeeeeeeeeeeeeeeebebqeeeeeeeeeeeeeeee~bebxr¦áÖsoh¥gpÏbegebJfghÏbegebKfbIfg¦uÏgbKfbIfo¦iÐorepbrmnopqrstefghefghbIfbrijklefghefghefghbIfbebrmnopqrstefghefghbIfbrijklefghefghefghbIfbe~rs«rffsÏjfpf¦gÙgkfÐoh¥gpÏgeøghÏgeù÷g¦iÏgù~÷~o¦fÐoreppk¦gÙuÏge ù ~ù ~Åªiântgem~ge~jpp¦iÏpt¦fÏtl¬repppp`;class h{constructor(g={}){this.o=g.correlationSampleSize>0?g.correlationSampleSize:11025,this.p=g.initialGranularity>0?g.initialGranularity:16,this.i=g.t>=0?g.t:.5,this.h=!0===g.u,this.q=r.get(h),this.q||(this.h?this.q=WebAssembly.compile(b(t)):this.q=f().then(e=>e?WebAssembly.compile(b(p)):WebAssembly.compile(b(i))),r.set(this.q)),this.P=o.get(h),this.P||(this.h?this.P=Promise.resolve(66560):this.P=f().then(e=>66560),o.set(this.P)),this.j=function g(b,f,r,o,p){this.l=new Map,this.k=(e,g)=>Math.min(e.samplesDecoded,g.samplesDecoded,this.o),this.I=(e,g)=>Math.min(e.samplesDecoded,g.samplesDecoded,this.p),this.m=(e,g,b)=>{const f=g.BYTES_PER_ELEMENT;let r=b/f;for(let o=0;o<e.length;o++)b+=e[o].length*f,g.set(e[o],r),r+=e[o].length;return b},this.v=(b,f)=>{let r=this.l.get(b);if(!r){let e,f="text/javascript",o=`'use strict';(${""+((e,g,b,f,r)=>{self.onmessage=o=>{new e(Promise.resolve(o.data.module),Promise.resolve(o.data.K),b,f,r).O.get(g).apply(null,o.data.J).then(e=>{self.postMessage(e)})}})})(${""+g}, "${b}", ${this.h}, ${this.o}, ${this.p})`;try{e=void 0!==process.versions.node}catch{}r=e?`data:${f};base64,${Buffer.from(o).toString("base64")}`:URL.createObjectURL(new Blob([o],{type:f})),this.l.set(b,r)}const o=new(globalThis.Worker||e)(r,{name:"SynAudio"}),p=new Promise(e=>{o.onmessage=g=>{o.terminate(),e(g.data)}});return Promise.all([this.q,this.P]).then(([e,g])=>{o.postMessage({module:e,K:g,J:f})}),p},this.W=(e,g,b,f,r,o,p,i,t,h,s)=>this.q.then(g=>WebAssembly.instantiate(g,{env:{memory:e}})).then(({exports:n})=>{const u=new Map(Object.entries(n)).get("correlate"),y=new DataView(e.buffer);return u(g,b,f,r,o,p,i,t,h,s),{correlation:y.getFloat32(h,!0),sampleOffset:y.getInt32(s,!0)}}),this.M=(e,g)=>this.P.then(b=>{const f=Float32Array.BYTES_PER_ELEMENT,r=(e.samplesDecoded*e.channelData.length*f+g.samplesDecoded*g.channelData.length*f+2*f+b)/65536+4,o=new WebAssembly.Memory({initial:r,U:r,u:this.h}),p=new Float32Array(o.buffer),i=b,t=this.m(e.channelData,p,i),h=this.m(g.channelData,p,t),s=h+f,n=this.k(e,g),u=this.I(e,g);return this.W(o,i,e.samplesDecoded,e.channelData.length,t,g.samplesDecoded,g.channelData.length,n,u,h,s)}),this.G=(e,g,b=1,f=()=>{})=>this.P.then(r=>{const o=Float32Array.BYTES_PER_ELEMENT,p=(e.samplesDecoded*e.channelData.length*o+g.reduce((e,g)=>g.samplesDecoded*g.channelData.length*o+e,0)+g.length*(2*o)+r)/65536+4,i=new WebAssembly.Memory({initial:p,U:p,u:this.h}),t=new Float32Array(i.buffer),h=r;let s=this.m(e.channelData,t,h);const n=g.map(g=>{const b=this.m(g.channelData,t,s),f=b+o,r=f+o,p=this.k(e,g),n=this.I(e,g),u=[i,h,e.samplesDecoded,e.channelData.length,s,g.samplesDecoded,g.channelData.length,p,n,b,f];return s=r,u});let u=0,y=0,q=0;const P=Array(n.length);return new Promise((e,g)=>{f(0);const r=()=>{if(u>=n.length)return void(0===y&&e(P));const o=u++;y++,this.v("_syncWasmMemory",n[o]).then(e=>{P[o]=e}).catch(g).finally(()=>{y--,q++,f(q/P.length),r()}),y<b&&r()};r()})}),this.A=(e,g,b)=>{const f=[],r=[0],o=this.k(e,g),p=Math.log(e.samplesDecoded*o)/Math.log(this.p+1)*Math.log(o/1e4+1);b=Math.max(Math.round(Math.min(b,p,e.samplesDecoded/o/4)),1);const i=Math.ceil(e.samplesDecoded/b);let t=0;for(let h=0;h<b;h++){const b={channelData:[]};for(let g=0;g<e.channelData.length;g++){const f=e.channelData[g].subarray(t,t+i+o);b.channelData.push(f),b.samplesDecoded=f.length}t+=i-o,r.push(t),f.push(this.$(b,g))}return Promise.all(f).then(e=>{let g=0,b=-1;for(let f=0;f<e.length;f++)e[f].correlation>b&&(g=f,b=e[f].correlation);return{correlation:e[g].correlation,sampleOffset:e[g].sampleOffset+r[g]}})},this.$=(e,g)=>this.v("_sync",[e,g]),this.S=(e,g,b)=>globalThis.Worker?this.v("_syncWorkerConcurrent",[e,g,b]):this.A(e,g,b),this.O=new Map([["_sync",this.M],["_syncWasmMemory",this.W],["_syncOneToMany",this.G],["_syncWorker",this.$],["_syncWorkerConcurrent",this.A]]),this.q=b,this.P=f,this.h=r,this.o=o,this.p=p},this.T=new this.j(this.q,this.P,this.h,this.o,this.p)}async syncWorkerConcurrent(e,g,b){return this.T.S(e,g,b>=1?b:1)}async syncWorker(e,g){return this.T.$(e,g)}async sync(e,g){return this.T.M(e,g)}async _(e,g,b,f){return this.T.G(e,g,b,f)}async syncMultiple(e,g){g=g>=1?g:8;const b=[],f=[];let r=()=>{},o=Promise.resolve(),p=0;const i=()=>{o=new Promise(e=>{r=e})};for(let P=0;P<e.length;P++)f.push({vertex:{}});for(let P=0;P<e.length;P++){const t=e[P],h=f[P].vertex;h.name=t.name,h.samplesDecoded=t.data.samplesDecoded,h.Y=new Set;for(let s=0;s<e.length;s++){if(P===s)continue;const n=e[s],u=f[s];p++,b.push(this.syncWorker(t.data,n.data).then(e=>{e.correlation>this.i&&h.Y.add({parent:h,vertex:u.vertex,samplesDecoded:n.data.samplesDecoded,...e}),p--,r()})),p>=g&&(i(),await o)}}await Promise.all(b);const t=(e,g)=>e.parent&&g.parent&&e.parent.samplesDecoded!==g.parent.samplesDecoded?e.parent.samplesDecoded>g.parent.samplesDecoded:e.correlation!==g.correlation?e.correlation>g.correlation:e.sampleOffset!==g.sampleOffset?e.sampleOffset>g.sampleOffset:e.vertex&&g.vertex&&e.vertex.name.localeCompare(g.vertex.name)<0,h=new Map,s=new Set,n=e=>{for(const g of e.Y.values()){if(h.has(e))return h.get(e);h.set(e,g);const b=n(g.vertex),f=g;if(b){let e,g;t(b,f)?(e=b,g=f):(e=f,g=b),g.D||(g.D=new Set,s.add(g)),g.D.add(e),e.D&&e.D.delete(g)}h.delete(e)}};for(const{vertex:P}of f)n(P);for(const P of s)P.D.size&&P.parent.Y.delete(P);const u=new Set;for(const P of f)u.add(P.vertex);for(const P of f)for(const e of P.vertex.Y)u.delete(e.vertex);const y=(e,g,b,f=0)=>{for(const r of b)e.has(r.vertex)&&t(e.get(r.vertex),r)||e.set(r.vertex,{name:r.vertex.name,correlation:r.correlation,sampleOffset:f+r.sampleOffset}),y(e,g,r.vertex.Y,f+r.sampleOffset)},q=[];for(const P of u){const e=new Map;e.set(P,{name:P.name,sampleOffset:0}),y(e,P,P.Y),q.push([...e.values()].sort((e,g)=>e.sampleOffset-g.sampleOffset||(e.correlation||0)-(g.correlation||0)||g.name.localeCompare(e.name)))}return q}}return h},"object"==typeof exports&&"undefined"!=typeof module?module.exports=g(require("@eshaz/web-worker")):"function"==typeof define&&define.amd?define(["@eshaz/web-worker"],g):(e="undefined"!=typeof globalThis?globalThis:e||self).SynAudio=g(e.Worker);
//# sourceMappingURL=synaudio.min.js.map