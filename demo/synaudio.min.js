/* Copyright 2022 Ethan Halsall. This file is part of synaudio. https://github.com/eshaz/synaudio */
var t,V;t=this,V=function(t){function V(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var e=V(t),s=t=>{const V=new Map;[,8364,,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,,381,,,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,,382,376].forEach(((t,e)=>V.set(t,e)));const e=new Uint8Array(t.length);let s,n=!1,O=0,r=42,i=0;t.length>13&&"dynEncode"===t.substring(0,9)&&0===parseInt(t.substring(9,11),16)&&(r=parseInt(t.substring(11,13),16),i=13);const o=256-r;for(let a=i;a<t.length;a++)if(s=t.charCodeAt(a),61!==s||n){if(s>255){const t=V.get(s);t&&(s=t+127)}n&&(n=!1,s-=64),e[O++]=s<r&&s>0?s+o:s-r}else n=!0;return e.subarray(0,O)};const n=new WeakMap,O=String.raw`dynEncode0015v,uu$zzV 0xzvz tt}zvtwvz	'ÿ"5V&]V5V%65(6(5(6'U5+5575'ú7&5575(ú7%ûù5%5'ú7$5%5(ú7#ûù555'ú7"555(ú7!ûù5E5'ú7 5E5(ú7ûù6+5*5%5%ûù5#5#ûù5!5!ûù55ûù6*5)5&5&ûù5$5$ûù5"5"ûù5 5 ûù6)5VU65V%75]" 5VV 65*45*45*45*4§§§6-5)45)45)45)4§§§6,U55a"5V6U5VZU56! 5V655V7?5¨7.5.©5-§6-55?5¨7.5.©5,§6, 5V5["55655V76556U5?5¨7.5.©5?5¨7.5.©5-§§6-5?5¨7.5.©5?5¨7.5.©5,§§6,5V65V65V7"  5+45+45+45+4§§§5ÇXÔ§7ªÐ5,5ªÐ´5-5ªÐ´·¸Ë #'Y68U5555]07$V6%U5Va"5V]"5V6)V56*5V6+5V6 55V7,6-5V7.VV7V6!5V6/5V^6'U55&6"V6UU5'"5555"V^55"V5-^"V65.VdU5!656U555#7(5ù 55(%5%ù %5V565V65V7"  5/U55V7555"V5ù  55 7[" 5V65+55V7555"V?5?§M5V5 655*["5565#5V7"6(56U55"755(70?5?§M550?5?§M5V65V7"  5#5,6#5&V7&5)\"  5$5%6 U5V]"55 55 ]07!Va"5V6)5!V6*5!V655!V7+6,5!V7-VV7V65V6.V6#5!V^6/V6&U5!5&6"V6UU5/"555!5"V^55"V5,^"V65-VdU5656U555#7'5ù 55'%5%ù %5V565V65V7"  5.U55V7555"V5ù  575![" 5V65*55V7555"V?5?§M55 655!["5!565#5V7"6'56U55"755'7(?5?§M55(?5?§M5V65V7"  5#5+6#5&V7&5)\"  V65VK5VK55 6U5 Va"5 V6U5$5%V7V^UV6#! 565 V7#6U545?Ðµ5?Ðµ5?Ðµ5?!Ðµ645V%65V7"  5U55#V656U545?Ðµ645V65V7"  U5V^UV6! 565 V76U555?Ðµ5?Ðµ5?Ðµ5?!Ðµ655V%65V7"  5Z"55V6U555?Ðµ655V65V7"  555 ÇÐ¸Ë635V_U5$V5%V65V65 Ì6556V6U545?Ð¶6655?Ð6752555455¸Ë535 %71r55K551M516255 65657µ645565575]"  U5Va"55577555_06557V5V_06U5 VaU5864! 5$5%V65 V7ZU58645! 55V6586456U545?Ðµ645V65V7" 55 65V^"55V655$55%6U545?Ðµ5?Ðµ5?Ðµ5?!Ðµ645V%65V7"  55a"55V6555$5%V65 Ì65U545?Ð¶665?Ð6752555455¸Ë535 %71r55K551M5152 625657µ645V65V65V75\"    /$v|zt{zvz@~yFGM`,r=String.raw`dynEncode000eo{%nns|{s{}O)q}szosmmvso~mpos±ÛN.0OVO.Oy/N..x08.¡0..x08.¡0¢.8.¡0.8.¡0¢.8.¡0.8.¡0¢.8.¡0 .8.¡0!¢."    /"..¢..¢..¢.!.!¢.    /..¢..¢..¢. . ¢.    /.Ox/.Ox0.V.OyO0.\.O/N.OSN./.O/..O0x8.¡0.¢. /..x8.¡0.¢. /.O.yT..y/..O0x/..x/N.8.¡0.¢.8.¡0.¢.  /.8.¡0.¢.8.¡0.¢.  /.Ox/.Ox/.Oy0.".ÀQÍ 0£É..£É­..£É­°±ÄßR/(N..V/N.OZ.OV.Oy/.O/.O/.O/NO/.OUN./N...x0 8.8 F.. 8.8 F.Ox/.Ox0.U.N..Ox0....zxOx8.8 F..x/.Ox0.U...)/N.OV....V)0OZ.Oy/.O/.O/.O/O/O/NO/.OUN./N...x08.8 F..8.8 F.Ox/.Ox0.U.N..Ox0....zxOx8.8 F..x/.Ox0.UO/.OD.OD..y/N.OZ.O/N.Oy0OWNO/./.O0/N.$.8É®.8É®.8É®.8É®/$.Ox/.Oy0.N..Ox/./N.$.8É®/$.Ox/.Oy0N.OWNO/./.O0/N.%.8É®.8É®.8É®.8É®/%.Ox/.Oy0.S..Ox/N.%.8É®/%.Ox/.Oy0.%.ÀÉ±Ä/#.OXN.O/.O/.Å/%./O/N.$.8É¯/&..x8É/'."...$.%±Ä.#.0!k..D..!F.!/"../.&.'®/$..x/..x0.VN.OZ...z0x0...V)/..y0O.OX)/N.OZN.(/$.Oy/.O0SN.(/$...Ox/.(/$./N.$.8É®/$.Ox/.Oy0..x/.OW..Ox/..x.y/N.$.8É®.8É®.8É®.8É®/$.Ox/.Oy0..\..Ox/...xOx/.Å/%N.$.8É¯/&.8É/'."...$.%±Ä.#.0!k..D..!F.!."/".&.'®/$.Ox/.Ox/.Ox0.U`;class i{constructor(t={}){this.t=t.correlationSampleSize||11025,this.V=t.initialGranularity||16,this.O=n.get(i),this.O||(this.O=(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))().then((t=>t?WebAssembly.compile(s(O)):WebAssembly.compile(s(r)))),n.set(this.O)),this.i=function t(V,s,n){this.o=new Map,this.h=(t,V,e)=>{const s=V.BYTES_PER_ELEMENT;let n=e/s;for(let O=0;O<t.length;O++)e+=t[O].length*s,V.set(t[O],n),n+=t[O].length;return e},this.U=(V,s)=>{let n=this.o.get(V);if(!n){const e=`'use strict';(${""+((t,V,e,s)=>{self.onmessage=n=>{new t(Promise.resolve(n.data.$),e,s).l.get(V).apply(null,n.data.N).then((t=>{self.postMessage(t)}))}})})(${""+t}, "${V}", ${this.t}, ${this.V})`,s="text/javascript";try{n=URL.createObjectURL(new Blob([e],{type:s}))}catch{n=`data:${s};base64,${Buffer.from(e).toString("base64")}`}this.o.set(V,n)}const O=new(globalThis.Worker||e.default)(n,{name:"SynAudio"}),r=new Promise((t=>{O.onmessage=V=>{O.terminate(),t(V.data)}}));return this.O.then((t=>{O.postMessage({$:t,N:s})})),r},this.u=(t,V)=>{const e=Float32Array.BYTES_PER_ELEMENT,s=new WebAssembly.Memory({initial:(t.samplesDecoded*t.channelData.length+V.samplesDecoded*V.channelData.length)*e/65536+4});return this.O.then((t=>WebAssembly.instantiate(t,{env:{memory:s}}))).then((({exports:n})=>{const O=new Map(Object.entries(n)),r=O.get("correlate"),i=new Float32Array(s.buffer),o=new DataView(s.buffer),a=O.get("__heap_base").value,h=this.h(t.channelData,i,a),x=this.h(V.channelData,i,h),y=x+e;return r(a,t.samplesDecoded,t.channelData.length,h,V.samplesDecoded,V.channelData.length,this.t,this.V,x,y),{correlation:o.getFloat32(x,!0),sampleOffset:o.getInt32(y,!0)}}))},this.p=(t,V,e)=>{const s=[],n=[0],O=Math.ceil(t.samplesDecoded/this.t/2);e=Math.min(e,O);const r=Math.ceil(t.samplesDecoded/e);let i=0;for(let o=1;o<=e;o++){const e={channelData:[]};for(let V=0;V<t.channelData.length;V++){const s=t.channelData[V].subarray(i,i+r+this.t);e.channelData.push(s),e.samplesDecoded=s.length}i+=r-this.t,n.push(i),s.push(this.m(e,V))}return Promise.all(s).then((t=>{let V=0,e=-1;for(let s=0;s<t.length;s++)t[s].correlation>e&&(V=s,e=t[s].correlation);return{correlation:t[V].correlation,sampleOffset:t[V].sampleOffset+n[V]}}))},this.m=(t,V)=>this.U("_sync",[t,V]),this.M=(t,V,e)=>globalThis.Worker?this.U("_syncWorkerConcurrent",[t,V,e]):this.p(t,V,e),this.l=new Map([["_sync",this.u],["_syncWorker",this.m],["_syncWorkerConcurrent",this.p]]),this.O=V,this.t=s,this.V=n},this.W=new this.i(this.O,this.t,this.V)}async syncWorkerConcurrent(t,V,e=1){return this.W.M(t,V,e)}async syncWorker(t,V){return this.W.m(t,V)}async sync(t,V){return this.W.u(t,V)}}return i},"object"==typeof exports&&"undefined"!=typeof module?module.exports=V(require("web-worker")):"function"==typeof define&&define.amd?define(["web-worker"],V):(t="undefined"!=typeof globalThis?globalThis:t||self).SynAudio=V(t.Worker);
//# sourceMappingURL=synaudio.min.js.map