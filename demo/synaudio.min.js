/* Copyright 2022 Ethan Halsall. This file is part of synaudio. https://github.com/eshaz/synaudio */
var d,e;d=this,e=function(d){function e(d){return d&&"object"==typeof d&&"default"in d?d:{default:d}}var f=e(d),a=d=>{const e=new Map;[,8364,,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,,381,,,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,,382,376].forEach(((d,f)=>e.set(d,f)));const f=new Uint8Array(d.length);let a,o=!1,t=0,h=42,j=0;d.length>13&&"dynEncode"===d.substring(0,9)&&0===parseInt(d.substring(9,11),16)&&(h=parseInt(d.substring(11,13),16),j=13);const s=256-h;for(let n=j;n<d.length;n++)if(a=d.charCodeAt(n),61!==a||o){if(a>255){const d=e.get(a);d&&(a=d+127)}o&&(o=!1,a-=64),f[t++]=a<h&&a>0?a+s:a-h}else o=!0;return f.subarray(0,t)};const o=new WeakMap,t=String.raw`dynEncode0064dÅ×ÑedddereÄnããããããããããdfsegÉÒÚjÑÉÑÓÖÝfdfgfedjleãd¥äìhokfmÇÓÖÖÉÐÅØÉddoÃÃÌÉÅÔÃÆÅ×Égdn^~e[~hxãnálßhà¨ddddddddf¤ejej¬t¥hÓuhtuÏr¬wf¤e¥d°qdf¥f¬qdf¥eÏx¥deÏye¥eÕze¥àÕode¥fØ{Î}e¥hÏ|¥fÚ¥eÎf¥bccckÕqf¥eÕ~e¥h­g¤evÐs¥djf¤f¤qdesÎ¥fØdÎd¯}s¥fØdÎ¯Õqd¥df|¥h³h¤qndjg¤jjpÎadfdjadfdaHeaofdjadftjadftaHeaoftj¥Îjf¥lÎfn¥fÏnqdoo~h¤f¥fØdÎjfsÎ¥fØdÎadfdjadfdaHeaofdoeojªqeoj¥ã×fzhãj¥fØdÎnjsÎ¥fØdÎfdnfdöfdj¥eÖijojfyªqdejÏnpj¥fØsÎdjg¤jsÎfjÎfdffdöfdffhffhöfhj¥lÎjn¥fÏnqdoop{Îpv¥eÎvx«qdoohrwof¤i¥f¬qdo¥d°qdi¥eÏvo¥eÕwo¥àÕhgo¥fØxÎyo¥hÏz¥fÚ¥eÎf¥bccckÕif¥eÕ{¥dpo¥h­}¥dqg¤oqÐs¥djf¤f¤}qdosÎ¥fØgÎg¯ys¥fØgÎ¯Õqd¥dfz¥h³h¤ingjg¤jjpÎ|adfdjadfdaHeaofdj|adftjadftaHeaoftj¥Îjf¥lÎfn¥fÏnqdoo{h¤f¥fØgÎjfsÎ¥fØgÎadfdjadfdaHeaofdohjoªqeoj¥eÖfwhãj¥fØgÎnjsÎ¥fØgÎfdnfdöfdfijojfoªqdojÏnpj¥fØsÎ|gjg¤jsÎfj|Î~fdffdöfdf~fhffhöfhj¥lÎjn¥fÏnqdoopxÎpq¥eÎqv«qdoom¥dfdl¥dfdf¤r¥d°qdr¥gÕff¤u¥ã×tÎh¥g­h¤¥dipeodjr¥àÕing¤jfdjfhjfljfpj¥tÎjn¥hÏnqdoofh¤i¥fØdÎjfng¤jfdj¥hÎjn¥eÏnqdoof¤h¥g­h¤¥dhpeogjr¥àÕhng¤jfdjfhjfljfpj¥tÎjn¥hÏnqdoof©qdh¥fØgÎjg¤jfdj¥hÎjf¥eÏfqdooro¥u²hão¥tÏhaw¥dfgjg¤jadddaIeaJeaHejaddtaIeaJeaHejaddaIeaJeaHejaddaIeaJeaHej¥¤Ïjf¥tÎfh¬qdoo¥eÏ¥ÔÕi¥doferÏsagafadaeöööf¤ofe°qde¥ã×oÎio¥gÕhhãe¥fØgÎjhfg¤jfd÷øöj¥hÎjf¥eÏfqdoehÖieoei¥g­qdoeÏfe¥fØgÎjg¤jfp÷øjfl÷øjfh÷øjfd÷øööööj¥tÎjf¥hÏfqdoof¤s¥d°h¤¥de§ddddpeoutÏvk¥fØwr¥gÕnr¥tÏxu¥ã×tÎyr¥eÏ¥ÔÕo§ddä#öùawr§dddd¥der¥u¬zdh¥dpg¤p¥fØdÎfdprÎ¥fØdÎ{fãzh¤apddddddddddddddddapdddddddddddddddd¥dpeoaw¥dj¥dqapddddddddddddddddapddddddddddddddddg¤hjÎfadddaIegjÎiadddaIeaJeaHefaddtaIeiaddtaIeaJeaHefaddaIeiaddaIeaJeaHefaddaIeiaddaIeaJeaHeaJeaHeaJeaHeaJeaHeaJeaHej¥¤Ïjq¥tÎqx¬qdoooi{fdagafadaeöööf¤ir²qdyiÏqnhãi¥fØhÎjnfg¤jfd÷øöj¥hÎjf¥eÏfqdoinÖiioiq¥g­qdivÎfi¥fØhÎjg¤jfp÷øjfl÷øjfh÷øjfd÷øööööj¥tÎjf¥hÎfqdooagafadaeöööùùÁhãmpfdlfdpieoehwÎhkpÎps¬qdoof¤k¥e°qdekkÐfÎhshs¬oefÏe¥de¥d®hf¤r¥d°h¤peou¥ã×tÎifãr¥gÕe©h¤hpeoh¥fØdÎjefg¤jfdj¥hÎjf¥eÏfqdoehÎoei¥g­qde¥fØdÎjhtÎeÏuÏfg¤jfdjfhjfljfpj¥tÎjf¥hÏfqdooho²qdutÏqr¥gÕkr¥tÏsh¥fØdÎiu¥ã×tÎtr¥eÏ¥ÔÕp§ddä#öùawrr¥u¬ug¤h¥fØdÎfdhrÎ¥fØdÎvfãuh¤apddddddddddddddddapdddddddddddddddd¥dpeoaw¥dnijgfapddddddddddddddddapddddddddddddddddg¤jadddaIefadddaIeaJeaHejaddtaIefaddtaIeaJeaHejaddaIefaddaIeaJeaHejaddaIefaddaIeaJeaHeaJeaHeaJeaHeaJeaHeaJeaHej¥¤Ïjf¥¤Ïfn¥tÎns¬qdopoevfdagafadaeöööf¤er²qdteÏnkhãe¥fØiÎjkfg¤jfd÷øöj¥hÎjf¥eÏfqdoekÖieoen¥g­qdeqÎfe¥fØiÎjg¤jfp÷øjfl÷øjfh÷øjfd÷øööööj¥tÎjf¥hÎfqdooagafadaeöööùùÁhámhfdlfdioi¥hÎih¥eÎho«qdooood~sØÅÖËÉØÃÊÉÅØÙÖÉ×ek×ÍÑÈ`,h=String.raw`dynEncode000eo{&nns|{s{}O)q}szosmmvso~mposÉ¢N.0OVO.Oy/N..x08.¡0..x08.¡¢.8.¡0.8.¡¢.8.¡0.8.¡¢.8.¡0.8.¡¢.    /..¢..¢..¢..¢.    /.Ox/.Ox0.V.OyO0.\..Ox/.O0.O.x/./N.8.¡0.¢. /.Ox/.Oy0.../.OW..y/.O.x/N.8.¡0.¢.8.¡0.¢.8.¡0.¢.8.¡0.¢.    /.Ox/.Oy0..ÀQÍ 0£É..£É­..£É­°±Ä°R/)N.....V)0$V/"N.OZ.OV.Oy/ .O/.O/.O/NO/.OUN./N...#x08.8 F..8.8 F.Ox/.Ox0.U.N.O.x0..!z.xO.x8.8 F..#x/#.!Ox0!. U..$.")/"N.OV."OZ.Oy/."O/."O/ ."O/O/#O/!NO/."OUN./N...#x08.8 F..8.8 F.Ox/.Ox0. U.N.O.x0.!."z.xO.x8.8 F..#x/#.!Ox0!.U.OD.ODN.$OZ.$O/N.$Oy0#OWNO/./.$O0/N.(.8É®.8É®.8É®.8É®/(.Ox/.Oy0.N.O.x/./N.(.8É®/(.Ox/.Oy0N.#OWNO/#./.$O0#/N.'.8É®.8É®.8É®.8É®/'.Ox/.Oy0.S.#O.x/N.'.8É®/'.Ox/.Oy0.'.$ÀÉ±Ä/..$y/#N."O\."Oy/O/./N.8.¡0.¢.8.¡0.¢.8.¡0.¢.8.¡0.¢.    /.Ox/.Ox0.V."OyOO0."\.O."x/."O0.O.x/./N.8.¡0.¢. /.Ox/.Oy0.../.OW.".y/.O.x/N.8.¡0.¢.8.¡0.¢.8.¡0.¢.8.¡0.¢.    /.Ox/.Oy0N.#OZNO/Q/.O/.$O/.$Å/'Q/O/./O/N.(.8É¯/&..x8É/%....(.'±Ä...$0k..D..F./../.&.%®/(..x/..x0.#VN.OZ...z0x0.#..#V)/..y0O.OX)/N.$OZN.)/(.$Oy/.$O0SN.)/(..O.x/.)/(./N.(.8É®/(.Ox/.Oy0..x/.OW.O.x/..$x.y/N.(.8É®.8É®.8É®.8É®/(.Ox/.Oy0..\.O.x/..$xO.x/.$Å/'N.(.8É¯/&.8É/%....(.'±Ä...$0k..D..F../.&.%®/(.Ox/.Ox/.Ox0.U`;class j{constructor(d={}){this.o=d.correlationSampleSize||11025,this.t=d.initialGranularity||16,this.h=o.get(j),this.h||(this.h=(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))().then((d=>d?WebAssembly.compile(a(t)):WebAssembly.compile(a(h)))),o.set(this.h)),this.j=function d(e,a,o){this.i=new Map,this.O=(d,e,f)=>{const a=e.BYTES_PER_ELEMENT;let o=f/a;for(let t=0;t<d.length;t++)f+=d[t].length*a,e.set(d[t],o),o+=d[t].length;return f},this.g=(e,a)=>{let o=this.i.get(e);if(!o){const f=`'use strict';(${""+((d,e,f,a)=>{self.onmessage=o=>{new d(Promise.resolve(o.data.l),f,a).q.get(e).apply(null,o.data.p).then((d=>{self.postMessage(d)}))}})})(${""+d}, "${e}", ${this.o}, ${this.t})`,a="text/javascript";try{o=URL.createObjectURL(new Blob([f],{type:a}))}catch{o=`data:${a};base64,${Buffer.from(f).toString("base64")}`}this.i.set(e,o)}const t=new(globalThis.Worker||f.default)(o,{name:"SynAudio"}),h=new Promise((d=>{t.onmessage=e=>{t.terminate(),d(e.data)}}));return this.h.then((d=>{t.postMessage({l:d,p:a})})),h},this.u=(d,e)=>{const f=Float32Array.BYTES_PER_ELEMENT,a=new WebAssembly.Memory({initial:(d.samplesDecoded*d.channelData.length+e.samplesDecoded*e.channelData.length)*f/65536+4});return this.h.then((d=>WebAssembly.instantiate(d,{env:{memory:a}}))).then((({exports:o})=>{const t=new Map(Object.entries(o)),h=t.get("correlate"),j=new Float32Array(a.buffer),s=new DataView(a.buffer),n=t.get("__heap_base").value,i=this.O(d.channelData,j,n),O=this.O(e.channelData,j,i),r=O+f;return h(n,d.samplesDecoded,d.channelData.length,i,e.samplesDecoded,e.channelData.length,this.o,this.t,O,r),{correlation:s.getFloat32(O,!0),sampleOffset:s.getInt32(r,!0)}}))},this.N=(d,e,f)=>{const a=[],o=[0],t=Math.ceil(d.samplesDecoded/this.o/2);f=Math.min(f,t);const h=Math.ceil(d.samplesDecoded/f);let j=0;for(let s=1;s<=f;s++){const f={channelData:[]};for(let e=0;e<d.channelData.length;e++){const a=d.channelData[e].subarray(j,j+h+this.o);f.channelData.push(a),f.samplesDecoded=a.length}j+=h-this.o,o.push(j),a.push(this.H(f,e))}return Promise.all(a).then((d=>{let e=0,f=-1;for(let a=0;a<d.length;a++)d[a].correlation>f&&(e=a,f=d[a].correlation);return{correlation:d[e].correlation,sampleOffset:d[e].sampleOffset+o[e]}}))},this.H=(d,e)=>this.g("_sync",[d,e]),this.$=(d,e,f)=>globalThis.Worker?this.g("_syncWorkerConcurrent",[d,e,f]):this.N(d,e,f),this.q=new Map([["_sync",this.u],["_syncWorker",this.H],["_syncWorkerConcurrent",this.N]]),this.h=e,this.o=a,this.t=o},this.m=new this.j(this.h,this.o,this.t)}async syncWorkerConcurrent(d,e,f=1){return this.m.$(d,e,f)}async syncWorker(d,e){return this.m.H(d,e)}async sync(d,e){return this.m.u(d,e)}}return j},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("web-worker")):"function"==typeof define&&define.amd?define(["web-worker"],e):(d="undefined"!=typeof globalThis?globalThis:d||self).SynAudio=e(d.Worker);
//# sourceMappingURL=synaudio.min.js.map