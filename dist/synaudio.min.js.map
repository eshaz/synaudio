{"version":3,"names":["global","factory","this","Worker","_interopDefaultLegacy","e","default","Worker__default","simpleYenc","string","htmlCodeOverrides","Map","forEach","k","v","set","output","Uint8Array","length","byte","escaped","byteIndex","offset","startIdx","substring","parseInt","offsetReverse","i","charCodeAt","htmlOverride","get","subarray","wasmModule","WeakMap","simdWasm","String","raw","scalarWasm","SynAudio","constructor","options","_correlationSampleSize","correlationSampleSize","_initialGranularity","initialGranularity","_correlationThreshold","correlationThreshold","_module","async","WebAssembly","validate","simd","then","simdSupported","compile","SynAudioWorker","module","_sourceCache","_getCorrelationSampleSize","a","b","Math","min","samplesDecoded","_getInitialGranularity","_setAudioDataOnHeap","input","heapPos","bytesPerElement","BYTES_PER_ELEMENT","floatPos","_executeAsWorker","functionName","params","source","webworkerSourceCode","self","onmessage","msg","Promise","resolve","data","_workerMethods","apply","results","postMessage","type","URL","createObjectURL","Blob","Buffer","from","toString","worker","globalThis","name","result","message","terminate","_sync","floatByteLength","Float32Array","memory","Memory","initial","channelData","instantiate","env","exports","instanceExports","Object","entries","correlate","dataArray","buffer","heapView","DataView","aPtr","value","bPtr","bestCorrelationPtr","bestSampleOffsetPtr","correlation","getFloat32","sampleOffset","getInt32","_syncWorkerConcurrent","threads","promises","lengths","maxThreads","ceil","aLength","aSplit","cutChannel","push","_syncWorker","all","bestResultIdx","bestCorrelation","_syncWorkerConcurrentMain","_instance","clips","workers","graph","notify","wait","runningThreads","vertex","vertexClip","edges","Set","edgeClip","edge","syncWorker","correlationResult","add","parent","weighResults","localeCompare","path","cycles","detectCycle","values","has","cycleStartEdge","cycleEndEdge","keep","remove","cycleWith","delete","W","size","roots","traverseRoot","root","sampleOffsetFromRoot","sort","require","define","amd"],"sources":["synaudio.js"],"mappings":"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"}