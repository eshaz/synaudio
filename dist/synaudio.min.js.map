{"version":3,"names":["global","factory","this","Worker","t","n","e","r","Int32Array","o","s","i","c","length","Uint8Array","map","parseInt","substring","Map","forEach","set","a","l","f","g","h","p","u","DataView","buffer","getInt32","d","charCodeAt","get","m","subarray","console","error","Error","wasmModule","WeakMap","simdWasm","String","raw","scalarWasm","SynAudio","constructor","options","_correlationSampleSize","correlationSampleSize","_initialGranularity","initialGranularity","_correlationThreshold","correlationThreshold","_module","async","WebAssembly","validate","simd","then","simdSupported","compile","SynAudioWorker","module","_sourceCache","_getCorrelationSampleSize","b","Math","min","samplesDecoded","_getInitialGranularity","_setAudioDataOnHeap","input","output","heapPos","bytesPerElement","BYTES_PER_ELEMENT","floatPos","_executeAsWorker","functionName","params","source","isNode","type","webworkerSourceCode","self","onmessage","msg","Promise","resolve","data","_workerMethods","apply","results","postMessage","process","versions","node","Buffer","from","toString","URL","createObjectURL","Blob","worker","globalThis","name","result","message","terminate","_sync","floatByteLength","Float32Array","memory","Memory","initial","channelData","instantiate","env","exports","instanceExports","Object","entries","correlate","dataArray","heapView","aPtr","value","bPtr","bestCorrelationPtr","bestSampleOffsetPtr","correlation","getFloat32","sampleOffset","_syncWorkerConcurrent","threads","promises","lengths","maxThreads","log","max","round","aLength","ceil","offset","aSplit","cutChannel","push","_syncWorker","all","bestResultIdx","bestCorrelation","_syncWorkerConcurrentMain","_instance","syncWorkerConcurrent","syncWorker","sync","syncMultiple","clips","workers","graph","notify","wait","runningThreads","resetNotify","vertex","v","vertexClip","edges","Set","edgeClip","edge","correlationResult","add","parent","weighResults","localeCompare","path","cycles","detectCycle","values","has","cycleStartEdge","cycleEndEdge","keep","remove","cycleWith","delete","size","roots","traverseRoot","root","sampleOffsetFromRoot","sort","require","define","amd"],"sources":["synaudio.js"],"mappings":"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"}