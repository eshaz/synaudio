{"version":3,"names":["global","factory","this","Worker","_interopDefaultLegacy","e","default","Worker__default","simpleYenc","string","htmlCodeOverrides","Map","forEach","k","v","set","output","Uint8Array","length","byte","escaped","byteIndex","offset","startIdx","substring","parseInt","offsetReverse","i","charCodeAt","htmlOverride","get","subarray","wasmModule","WeakMap","simdWasm","String","raw","scalarWasm","SynAudio","constructor","options","_correlationSampleSize","correlationSampleSize","_initialGranularity","initialGranularity","_module","async","WebAssembly","validate","simd","then","simdSupported","compile","SynAudioWorker","module","_sourceCache","_getCorrelationSampleSize","a","b","Math","min","samplesDecoded","_getInitialGranularity","_setAudioDataOnHeap","input","heapPos","bytesPerElement","BYTES_PER_ELEMENT","floatPos","_executeAsWorker","functionName","params","source","webworkerSourceCode","self","onmessage","msg","Promise","resolve","data","_workerMethods","apply","results","postMessage","type","URL","createObjectURL","Blob","Buffer","from","toString","worker","globalThis","name","result","message","terminate","_sync","floatByteLength","Float32Array","memory","Memory","initial","channelData","instantiate","env","exports","instanceExports","Object","entries","correlate","dataArray","buffer","heapView","DataView","aPtr","value","bPtr","bestCorrelationPtr","bestSampleOffsetPtr","correlation","getFloat32","sampleOffset","getInt32","_syncWorkerConcurrent","threads","promises","lengths","maxThreads","ceil","aLength","aSplit","cutChannel","push","_syncWorker","all","bestResultIdx","bestCorrelation","_syncWorkerConcurrentMain","_instance","clips","correlationThreshold","workers","graph","notify","wait","runningThreads","vertex","vertexClip","edges","Set","edgeClip","edge","syncWorker","correlationResult","add","parent","weighResults","localeCompare","path","cycles","detectCycle","values","has","cycleStartEdge","cycleEndEdge","keep","remove","cycleWith","delete","J","size","roots","traverseRoot","root","sampleOffsetFromRoot","sort","require","define","amd"],"sources":["synaudio.js"],"mappings":"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"}