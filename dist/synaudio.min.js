/* Copyright 2022 Ethan Halsall. This file is part of synaudio. https://github.com/eshaz/synaudio */
var d,f;d=this,f=function(d){function f(d){return d&&"object"==typeof d&&"default"in d?d:{default:d}}var e=f(d),a=d=>{const f=new Map;[,8364,,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,,381,,,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,,382,376].forEach(((d,e)=>f.set(d,e)));const e=new Uint8Array(d.length);let a,n=!1,t=0,h=42,o=0;d.length>13&&"dynEncode"===d.substring(0,9)&&0===parseInt(d.substring(9,11),16)&&(h=parseInt(d.substring(11,13),16),o=13);const O=256-h;for(let s=o;s<d.length;s++)if(a=d.charCodeAt(s),61!==a||n){if(a>255){const d=f.get(a);d&&(a=d+127)}n&&(n=!1,a-=64),e[t++]=a<h&&a>0?a+O:a-h}else n=!0;return e.subarray(0,t)};const n=new WeakMap,t=String.raw`dynEncode0064dÅ×ÑedddereÄnããããããããããdfsegÉÒÚjÑÉÑÓÖÝfdfgfedjleãd¥äìhokfmÇÓÖÖÉÐÅØÉddoÃÃÌÉÅÔÃÆÅ×Égdnbe_huãmágàlßf¤e¥d°qdf¥f¬qdf¥eÏ|¥deÏ{e¥eÕze¥àÕode¥fØyÎxe¥hÏu¥fÚ¥eÎf¥bccckÕqf¥eÕte¥h­wg¤e~Ð}¥dff¤f¤wqde}Î¥fØdÎd¯x}¥fØdÎ¯Õqd¥dnu¥h³h¤qpdfg¤ffrÎvadfdfadfdaHeaofdfvadftfadftaHeaoftf¥Îfn¥lÎnp¥fÏpqdooth¤n¥fØdÎfn}Î¥fØdÎadfdfadfdaHeaofdoeofªqeof¥ã×nzhãf¥fØdÎpf}Î¥fØdÎfdpfdöfdf¥eÖifofn{ªqdefÏprf¥fØ}Îvdfg¤f}ÎnfvÎsfdnfdöfdnsfhnfhöfhf¥lÎfp¥fÏpqdooryÎr~¥eÎ~|«qdoof¤h¥d°qdi¥f¬qdi¥eÏ}¥dr¥dhÏ|h¥eÕ{h¥àÕigh¥fØzÎyh¥hÏx¥fÚ¥eÎf¥bccckÕof¥eÕuh¥h­t¥d~g¤h~Ðq¥dff¤f¤tqdhqÎ¥fØgÎg¯yq¥fØgÎ¯Õqd¥dnx¥h³h¤opgfg¤ffrÎwadfdfadfdaHeaofdfwadftfadftaHeaoftf¥Îfn¥lÎnp¥fÏpqdoouh¤n¥fØgÎfnqÎ¥fØgÎadfdfadfdaHeaofdoifhªqeof¥ã×n{hãf¥fØgÎpfqÎ¥fØgÎfdpfdöfdf¥eÖifofn|ªqdhfÏprf¥fØqÎwgfg¤fqÎnfwÎvfdnfdöfdnvfhnfhöfhf¥lÎfp¥fÏpqdoorzÎr~¥eÎ~}«qdoom¥dfdl¥dfdj¥tÏoj¥u²hã¥dndfg¤fadddaHefaddtaHefaddaHefaddaHef¥¤Ïfn¥tÎno¬qdoj¥eÏ¥ÔÕi¥dohagafadaeöööf¤hj²qdjh¥ã×Îpj¥gÕihãh¥fØdÎfing¤ffdöf¥hÎfn¥eÏnqdohiÖihohp¥g­qdjhÏnh¥fØdÎfg¤ffdöffhöfflöffpöf¥tÎfn¥hÏnqdoofãj¥u¬h¤apdddddddddddddddd¥dpeoapdddddddddddddddd¥dngfg¤fadddaHefaddtaHefaddaHefaddaHef¥¤Ïfn¥tÎno¬qdoj¥eÏ¥ÔÕohagafadaeöööf¤hj²qdjh¥ã×Îpj¥gÕihãh¥fØgÎfing¤ffdöf¥hÎfn¥eÏnqdohiÖihohp¥g­qdjhÏnh¥fØgÎfg¤ffdöffhöfflöffpöf¥tÎfn¥hÏnqdoojùawfãj¥u¬h¤apdddddddddddddddd¥dpeo¥dnapddddddddddddddddgfg¤fadddaIeaJeaHefaddtaIeaJeaHefaddaIeaJeaHefaddaIeaJeaHef¥¤Ïfn¥tÎno¬qdoj¥eÏ¥ÔÕofejÏqagafadaeöööf¤jfe°qdje¥ã×Îij¥gÕhhãe¥fØgÎfhng¤ffd÷øöf¥hÎfn¥eÏnqdoehÖieoei¥g­qdjeÏne¥fØgÎfg¤ffp÷øffl÷øffh÷øffd÷øööööf¥tÎfn¥hÏnqdoo§ddä#öùõf¤q¥d°h¤¥dh§ddddpeok¥fØ}¥dh¥djÏ|j¥eÕ{j¥eÏ¥ÔÕpj§ddddj¥u¬zde¥drg¤r¥fØdÎyfdjrÎ¥fØdÎxfãzh¤apddddddddddddddddapdddddddddddddddd¥dpeoaw¥df¥d~apddddddddddddddddapddddddddddddddddg¤efÎiadddaIefgÎnadddaIeaJeaHeiaddtaIenaddtaIeaJeaHeiaddaIenaddaIeaJeaHeiaddaIenaddaIeaJeaHeaJeaHeaJeaHeaJeaHeaJeaHef¥¤Ïf~¥tÎ~o¬qdopofxfdagafadaeöööagafadaeöööf¤fj²qdf¥ã×n{hãyf¥fØiÎfd÷giÎfd÷øööf¥eÖifoin|ªqdi¥fØfjiÏng¤efÎifh÷fgÎ~fh÷øifd÷~fd÷øööf¥lÎföön¥fÏnqdooùùÁhãmrfdlfdrihohe}ÎekrÎrq¬qdoof¤k¥e°qdqhkkÐeÎi®k¥dpheÏe¥de¥d®rf¤j¥u¬h¤apddddddddddddddddpeor¥fØdÎfapdddddddddddddddd¥dng¤fadddaHefaddtaHefaddaHefaddaHef¥¤Ïfn¥tÎno¬qdoj¥eÏ¥ÔÕpoiqkkagafadaeöööf¤jp°qdjp¥ã×Îhj¥gÕehãprÎ¥fØdÎfeng¤ffdöf¥hÎfn¥eÏnqdoepÖipoph¥g­qdjpÏnprÎ¥fØdÎfg¤ffdöffhöfflöffpöf¥tÎfn¥hÏnqdookr°qd¥djÏqj¥eÕ~r¥fØdÎej¥eÏ¥ÔÕijj¥u¬}g¤r¥fØdÎhfdjrÎ¥fØdÎ|fã}h¤apddddddddddddddddapdddddddddddddddd¥dpeoaw¥dpefgnapddddddddddddddddapddddddddddddddddg¤fadddaIenadddaIeaJeaHefaddtaIenaddtaIeaJeaHefaddaIenaddaIeaJeaHefaddaIenaddaIeaJeaHeaJeaHeaJeaHeaJeaHeaJeaHef¥¤Ïfn¥¤Ïnp¥tÎpo¬qdoiof|fdagafadaeöööagafadaeöööf¤fj²qdf¥ã×n~hãhf¥fØhÎfd÷ghÎfd÷øööf¥eÖifohnqªqdh¥fØfjhÏng¤efÎhfh÷fgÎpfh÷øhfd÷pfd÷øööf¥lÎföön¥fÏnqdooùùÁhámrfdlfdioe¥hÎer¥eÎrk«qdoood~sØÅÖËÉØÃÊÉÅØÙÖÉ×ek×ÍÑÈ`,h=String.raw`dynEncode000eo{&nns|{s{}O)q}szosmmvso~mpos¼N.0OVO.Oy/N..x08.¡0..x08.¡¢.8.¡0.8.¡¢.8.¡0.8.¡¢.8.¡0.8.¡¢.    /..¢..¢..¢..¢.    /.Ox/.Ox0.V.OyO0.\.O/.O..O0x8.¡..x8.¡¢. /.. /.O./O.y.T..y/..O0x/..x/N.8.¡.8.¡¢.8.¡.8.¡¢.  /.Ox/.Ox/.. . /.Oy0..ÀQÍ 0£É..£É­.É°±Ä®Q/%NN.OZ.OV.Oy/.O/.O/.O/NO/.OUN./N...x08.8 F..8.8 F.Ox/.Ox0.U.N.O.x0..z.xO.x8.8 F..x/.Ox0.UN.OZ.OV.Oy/.O/.O/.O/O/O/NO/.OUN./N...x08.8 F..8.8 F.Ox/.Ox0.U.N.O.x0..z.xO.x8.8 F..x/.Ox0.U.OD.OD.Oy/N.O\O/./N. .8 .8 .8 .8 / .Ox/.Ox0.V.OyOO0.\..Ox/.O0.O.x/./N. .8 / .Ox/.Oy0.../.OW..y/.O.x/N. .8 .8 .8 .8 / .Ox/.Oy0N.OVOO/./N.!.8 .8 .8 .8 /!.Ox/.Ox0.V.OyO0.\..Ox/.O0.O.x/./N.!.8 /!.Ox/.Oy0.../.OW..y/.O.x/N.!.8 .8 .8 .8 /!.Ox/.Oy0.!.À0"£/#..y/N..OVN.%/!OO/.%/!./N.8.#¡0$.$¢.8.#¡0$.$¢.8.#¡0$.$¢.8.#¡0$.$¢.!    /!.Ox/.Ox0.V.OyO0Z..Ox/.O0.O.x/./N.8.#¡0$.$¢.! /!.Ox/.Oy0.../.OW..y/.O.x/N.8.#¡0$.$¢.8.#¡0$.$¢.8.#¡0$.$¢.8.#¡0$.$¢.!    /!.Ox/.Oy0.!."QÍ £/"N.OZNO/.%/ . É/).O/.O/.Å/(.%/ O/./O/N.).8É¯/'..x8É/&. ...).(±Ä.#.".0!k..D..!F./.!. / .'.&®/)..x/..x0.VN.OZ...z0x/..y0O.OX)/.%/!....V)/N.O\.O.x/O/N.!.8 .8 .8 .8 /!.Ox/.Ox0.V.OyOO0.\..Ox/.O0..xO.x/./N.!.8 /!.Ox/.Oy0.../.OW..y/..xO.x/N.!.8 .8 .8 .8 /!.Ox/.Oy0..Z.O.x/..xO.x/.Å/(.!É/)N.).8É¯/'.8É/&. ...).(±Ä.#.".0!k..D..!F.!. / .'.&®/).Ox/.Ox/.Ox0.U`;class o{constructor(d={}){this.t=d.correlationSampleSize>0?d.correlationSampleSize:11025,this.h=d.initialGranularity>0?d.initialGranularity:16,this.o=n.get(o),this.o||(this.o=(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))().then((d=>d?WebAssembly.compile(a(t)):WebAssembly.compile(a(h)))),n.set(this.o)),this.O=function d(f,a,n){this.i=new Map,this.p=(d,f)=>Math.min(d.samplesDecoded,f.samplesDecoded,this.t),this.g=(d,f)=>Math.min(d.samplesDecoded,f.samplesDecoded,this.h),this.q=(d,f,e)=>{const a=f.BYTES_PER_ELEMENT;let n=e/a;for(let t=0;t<d.length;t++)e+=d[t].length*a,f.set(d[t],n),n+=d[t].length;return e},this.l=(f,a)=>{let n=this.i.get(f);if(!n){const e=`'use strict';(${""+((d,f,e,a)=>{self.onmessage=n=>{new d(Promise.resolve(n.data.u),e,a).j.get(f).apply(null,n.data.H).then((d=>{self.postMessage(d)}))}})})(${""+d}, "${f}", ${this.t}, ${this.h})`,a="text/javascript";try{n=URL.createObjectURL(new Blob([e],{type:a}))}catch{n=`data:${a};base64,${Buffer.from(e).toString("base64")}`}this.i.set(f,n)}const t=new(globalThis.Worker||e.default)(n,{name:"SynAudio"}),h=new Promise((d=>{t.onmessage=f=>{t.terminate(),d(f.data)}}));return this.o.then((d=>{t.postMessage({u:d,H:a})})),h},this.N=(d,f)=>{const e=Float32Array.BYTES_PER_ELEMENT,a=this.p(d,f),n=this.g(d,f),t=new WebAssembly.Memory({initial:(d.samplesDecoded*d.channelData.length+f.samplesDecoded*f.channelData.length)*e/65536+4});return this.o.then((d=>WebAssembly.instantiate(d,{env:{memory:t}}))).then((({exports:h})=>{const o=new Map(Object.entries(h)),O=o.get("correlate"),s=new Float32Array(t.buffer),i=new DataView(t.buffer),r=o.get("__heap_base").value,p=this.q(d.channelData,s,r),x=this.q(f.channelData,s,p),g=x+e;return O(r,d.samplesDecoded,d.channelData.length,p,f.samplesDecoded,f.channelData.length,a,n,x,g),{correlation:i.getFloat32(x,!0),sampleOffset:i.getInt32(g,!0)}}))},this.m=(d,f,e)=>{const a=[],n=[0],t=this.p(d,f),h=Math.ceil(d.samplesDecoded/t/2);e=Math.min(e,h);const o=Math.ceil(d.samplesDecoded/e);let O=0;for(let s=1;s<=e;s++){const e={channelData:[]};for(let f=0;f<d.channelData.length;f++){const a=d.channelData[f].subarray(O,O+o+t);e.channelData.push(a),e.samplesDecoded=a.length}O+=o-t,n.push(O),a.push(this.$(e,f))}return Promise.all(a).then((d=>{let f=0,e=-1;for(let a=0;a<d.length;a++)d[a].correlation>e&&(f=a,e=d[a].correlation);return{correlation:d[f].correlation,sampleOffset:d[f].sampleOffset+n[f]}}))},this.$=(d,f)=>this.l("_sync",[d,f]),this.k=(d,f,e)=>globalThis.Worker?this.l("_syncWorkerConcurrent",[d,f,e]):this.m(d,f,e),this.j=new Map([["_sync",this.N],["_syncWorker",this.$],["_syncWorkerConcurrent",this.m]]),this.o=f,this.t=a,this.h=n},this.I=new this.O(this.o,this.t,this.h)}async syncWorkerConcurrent(d,f,e=1){return this.I.k(d,f,e)}async syncWorker(d,f){return this.I.$(d,f)}async sync(d,f){return this.I.N(d,f)}}return o},"object"==typeof exports&&"undefined"!=typeof module?module.exports=f(require("web-worker")):"function"==typeof define&&define.amd?define(["web-worker"],f):(d="undefined"!=typeof globalThis?globalThis:d||self).SynAudio=f(d.Worker);
//# sourceMappingURL=synaudio.min.js.map